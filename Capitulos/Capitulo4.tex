%---------------------------------------------------------------------
%
%                          Capítulo 3
%
%---------------------------------------------------------------------

\chapter{Tecnologías empleadas}


\label{cap4:sec:kinect}
En este capítulo se expondrán las tecnología utilizados para el desarrollo del proyecto. A continuación se detallarán de forma técnica el software y los dispositivos utilizados para realizar el proyecto.


%-------------------------------------------------------------------
\section{Software y hardware empleados}
%-------------------------------------------------------------------
\label{cap4:sec:Software y hardware empleados}
El software principal utilizado en este proyecto es Unity 5.5 \citep{Unity_Manual}, que es un motor de desarrollo de videojuegos.
Para la edición , compilación y depuración de la programación de Unity se ha utilizado Visual Studio 2015 \citep{VSMS} con el lenguaje de programación C\#.\\
\\
\comImpl{Aqui raul pones los programas de modelado de avatar. Animaciones de mixamo,.}\\
\\

El hardware principal usado en este proyecto es el dispositivo de captura de movimiento kinect v2 (referencia) y el cable de conexion(nose como se llama, referencia).







\subsection{Entorno de desarrollo : Unity 3D}
%-------------------------------------------------------------------
\label{cap4:sec:Entorno de desarrollo : Unity 3D}
El objetivo de este proyecto es la captura y el análisis de movimiento relacionados con el arte marcial afro-brasileño capoeira. Con esto en mente, se llega a la primera decisión de que plataforma escoger para el desarrollo de este proyecto.

Los entornos a elegir fueron Visual Studio 2015 \cite{VSMS}, Unity 3D Engine \citep{Unity} y Unreal Engine \cite{Unreal}. El primero descartado fue Visual Studio 2015 porque se busca crear también un escenario 3D y, tanto Unity como Unreal ,ofrecen herramientas útiles para la creación de estos escenarios.\\\\
En cuanto a la decisión de elegir entre Unity o Unreal Engine fue basada en la comunidad que hay detrás de cada uno de ellos, y sobre todo, en lo que se quiere abarcar con este proyecto. Unreal suele ser utilizado por las empresas para juegos grandes y mas profesionales , mientras que Unity se puede aplicar, tanto a pequeñas como a grandes aplicaciones, siendo su aprendizaje de este mas intuitivo que Unreal.\\

Un motor de juegos se especifica como la rutina de programación que permiten el diseño, la creación y la representación de un videojuego. En este caso, se adecua correctamente ya que se pretende realizar un entorno 3D donde los usuarios se perciban y aprendan movimientos controlando un avatar.

La funcionalidad de un motor de juegos consiste en proveer al juego de un motor de renderizado para los gráficos 2D y 3D,  motor físico, sonidos, scripting, animación, un escenario gráfico, etc..\\

Unity es un motor de juegos desarrollado por la  compañía \texttt{Unity Technologies} y utiliza los lenguajes de programación C ,C++ , C\# y javascript.


\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{Imagenes/Capitulos/4/logo_unity}
	\caption{Logo Unity}
	\label{fig:logo_Unity}
\end{figure}


En un primer momento Unity salió al mercado ofreciendo un software de calidad y barato añadiendo el objetivo de que pequeñas y grandes empresas pudieran utilizarlo por igual, dando además, la posibilidad de que su contenido sea compatible con prácticamente cualquier medio o dispositivo\citep{Unity-relations}. Gracias a ello, Unity creció exponencialmente en el mercado, generando así, una gran comunidad que puede servir de pilar de ayuda para los nuevos desarrolladores.

Unity ofrece diferentes tipos de versiones como la personal, que es gratuita y la profesional, que es de pago. En la versión personal es necesario promocionar el logotipo de Unity y carece de funcionalidades adicionales de renderizado del motor que la profesional si contiene.

Otro aspecto importante de Unity es el Asset Store. Es una biblioteca del editor que contiene una multitud de paquetes o \textit{Assets} comerciales y gratuitos creados, de forma continua, por la comunidad o por \texttt{Unity Technologies}. Estos paquetes pueden contener modelados 3D, texturas, animaciones y demás de contenido que servirá de ayuda al proyecto al no poder contar con un experto diseñador. 

La apariencia del editor de Unity se observa en la figura \ref{fig:editor_Unity}

\begin{figure}[h!]
	\centering
	\includegraphics[width=1\linewidth]{Imagenes/Capitulos/4/editor-unity}
	\caption{Apariencia de editor Unity}
	\label{fig:editor_Unity}
\end{figure}

Como se observa en la imagen, el editor de Unity esta formado por varios paneles. La estructuración básica de un juego de Unity se realiza mediante escenas, para tener una previsualizanción de los elementos que aparecen en una escena se utiliza el panel uno denominado \textit{scene}. Este panel representa una dimensión 3D donde se podrá rotar y desplazar en los tres ejes ,para poder así, modificar todos los elementos de la escena en cualquier ángulo.\\

El segundo panel denominado \textit{Game} muestra la vista generada por la cámara, es decir, la imagen que se verá en el juego.\\

Los elementos incorporados a la escena se archivan en el panel tercero con el nombre \textit{Hierarchy}. Estos pueden ser  objetos 3D, cámara, sonidos, luces,e incluso objetos de tipo GUI para la implemetación de interfaces. Los elementos se muestran de una forma jerárquica y al seleccionar uno se expondrán sus características y componentes en el panel cuarto denominado \textit{Inspector}. Por ejemplo, al seleccionar la cámara en el \textit{Hierarchy} muestra su componente \textit{transform}, este muestra la información de su posición y rotación, pudiendo ser modificable.\\

El panel quinto llamado \textit{Project} agrupa ,en forma de directorio, todos los scripts , paquetes , imágenes y archivos relacionados con el proyecto.\\

La ejecución de pruebas del juego se realiza por medio del \textit{Play mode} situado en el panel sexto. Esta funcionalidad permite poner en funcionamiento el juego , pararlo y detener su ejecución, siendo esto, fundamental para comprobar y depurar un juego \citep{Unity_Manual}.\\

Una vez estudiado el editor de Unity se toma la decisión de que lenguaje de programación utilizar. Unity soporta dos lenguajes:
\begin{itemize}
	\item C\#: lenguaje estandar similar a C++ y Java.
 	\item \textit{UnityScript} : lenguaje basado en javascript propio de Unity.  
\end{itemize} 
Se optó por la decisión de utilizar C\# porque se acomoda mejor a la aplicación, puesto que no está orientada a web, y además ofrece unas características mejores que el \textit{UnityScript}.\\

Para controlar los eventos de un objeto o los eventos de las entradas de los usuario, Unity utiliza scripts.De forma básica los scripts tienen implementado un método \textit{Start} para inicializar las variables del objeto y un método \textit{Update} encargado de actualizar los parámetros a partir del tratamiento de eventos.\\

Se utilizó Visual Studio 2015 \citep{VSMS} para la depuración de scripts, ya que proporciona visualización de las variables utilizadas en tiempo de ejecución, y además, da la posibilidad de ejecutar el script paso a paso. También otro factor clave fue que este entorno de programación se tenía experiencia previa de uso.





\subsection{MakeHuman}

La aplicación MakeHuman sirve para crear modelos humanos que pueden ser utilizados en diferentes plataformas 3D, como animaciones, videojuegos, etc. Promueve el arte digital y artistas digitales, proporcionando una herramienta de alta calidad liberada al dominio público con la licencia CCO, mientras que la base de datos y el código se publicaron mediante una licencia AGPL3.

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\linewidth, height=0.3\textheight]{Imagenes/Capitulos/4/logo_makehuman}
	\caption{Logo MakeHuman}
	\label{fig:logo_makehuman}
\end{figure}


MakeHuman utiliza un humano estándar y mediante varios deslizadores o scrolls se podrán alterar los parámetros de la estatura, anchura, sexo, edad, etc. 


\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\linewidth, height=0.3\textheight]{Imagenes/Capitulos/4/makehuman_estandar}
	\caption{Aspecto del humano estándar de MakeHuman}
	\label{fig:makehuman_estandar}
\end{figure}

En un principio se pensó utilizar esta aplicación para el modelado de los personajes debido a su intuitiva interfaz y la facilidad de exportación en formato fbx el cual utiliza Unity. Pero tras investigar posibles alternativas, se encontró la aplicación Fuse Character Creator, la cual posibilitaba el desarrollo de los personajes con mayor calidad. De forma simultanea se podría realizar la configuración de los personajes para su posterior animación.

\subsection{Fuse Character Creator}

Se trata de una aplicación desarrollada por Mixamo, la cual permite crear personajes únicos mediante una intuitiva interfaz que separa el avatar en diferentes partes, como son la cabeza, el torso, las piernas y los brazos. Posteriormente a la selección de las diferentes partes del cuerpo ya predefinidas por el sistema, se puede editar cada una de las partes del personaje, ya sean los rasgos de la cara, el tamaño de los brazos, la longitud de las piernas, etc. Al seleccionar la parte del cuerpo que se quiere modificar, simplemente será necesario pinchar y realizar un scrool o deslizamiento hacia la izquierda o derecha para aumentar su tamaño, y para seleccionar el punto exacto donde se ubicará por ejemplo el ombligo, los ojos, las rodillas, etc, se realizará un scrool o desplazamiento hacía arriba o abajo.

Al terminar de modelar el personaje, se pasará a la sección de vestuario. Donde existen prendas predefinidas, como camisas, pantalones, zapatos, etc. Al terminar de vestir al avatar, esta aplicación posee la peculiaridad de poder subir al servidor de Mixamo el modelado realizado y completar la configuración de los huesos además de incluir una posible animación.


\subsection{Mixamo 3D Animation Online Services}

Mixamo es una compañía tecnológica encargada del desarrollo y venta de servicios para la animación de personajes 3D.

\subsection{Marvelous Designer}

Maneja un software  encargado en la simulación de telas, el cual permite a los artistas y diseñadores de moda modelar ropa en 3D.

\subsection{Blender}

Es una aplicación dedicada al modelado, renderizado, animación y creación de gráficos 3D.

\subsection{MonoDevelop}



\comImpl{Enlaces sobre las caracteristicas de Kinect}

\medskip
https://msdn.microsoft.com/library/jj131033.aspx\\
https://msdn.microsoft.com/library/dn782025.aspx\\
https://developer.microsoft.com/es-es/windows/kinect/hardware
%Y tambi?n ponemos el acr?nimo \ac{CVS} para que no cruja.

%Ten en cuenta que si no quieres acr?nimos (o no quieres que te falle la compilaci?n en ``release'' mientras no tengas ninguno) basta con que no definas la constante \verb+\acronimosEnRelease+ (en \texttt{config.tex}).


%-------------------------------------------------------------------
%\section*{\ProximoCapitulo}
%-------------------------------------------------------------------



% Variable local para emacs, para  que encuentre el fichero maestro de
% compilaci?n y funcionen mejor algunas teclas r?pidas de AucTeX
%%%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../Tesis.tex"
%%% End:
